{% extends 'admin/base.html.twig' %}

{% block title %}Administration des précommandes {% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ app.request.getBaseURL() }}/css/chartist.css">
	<link rel="stylesheet" href="{{ app.request.getBaseURL() }}/css/widget.css">
{% endblock %}


{% block body %}

<div class="pcoded-content">
	<div class="pcoded-inner-content">
		<div class="main-body">
			<div class="page-wrapper">
				<div class="page-body">
					{% for label, messages in app.flashes %}
						<div class="alert alert-{{ label }} background-{{ label }}">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<i class="icofont icofont-close-line-circled text-white"></i>
							</button>
							{% for message in messages %}
								<p style="margin-bottom: 0px !important;">{{ message | raw }}</p>
							{% endfor %}
						</div>
					{% endfor %}
			        <div class="card">
			            <div class="card-header">
			              <h5>Liste des précommandes</h5>
			            </div>
			            <div class="card-block table-border-style">
			              {% if preorders %}
			                <div class="table-responsive">
			                  <table class="table table-striped table-bordered datatable display">
			                    <thead>
			                      <tr>
			                        <th>Titre</th>
			                        <th>Quantité</th>
			                        <th>Action</th>
			                      </tr>
			                    </thead>
			                    <tbody>
			                      {% for preorder in preorders %}
			                        <tr>
			                          <td>{{ preorder.title|capitalize }}</td>
			                          <td>{{ preorder.quantity|capitalize }}</td>
			                          <td>
				                          <a href="{{ path('admin_preorder_delete', { id : preorder.id }) }}" class="js-delete-element">
			                                <i class="fal fa-trash" style="color: #ff5370; font-size: 20px; padding: 3px;"></i>
			                              </a>
			                          </td>
			                        </tr>
			                      {% endfor %}
			                    </tbody>
			                  </table>
			                </div>
			              {% else %}
			                Aucun produit à commander.
			              {% endif %}
			            </div>
			        </div>
				</div>
			</div>
			<div id="styleSelector">
			</div>
		</div>
	</div>
</div>
</div>

<style>

.status {
	display: inline-flex;
	align-items: center;
	padding: .3rem .8rem;
	background-color: rgba(228, 229, 231, 1);
	border: 0;
	border-radius: 2rem;
	line-height: 1.6rem;
}

.result_icon {
	width: 32px;
	height: 32px;
	background-size: cover;
	background-position: center;
}

</style>

{% endblock %}


{% block javascripts %}
	
<script>
	

$('.js-delete-element').click( function () {

	event.preventDefault();
	var url = this.href;

	const swalWithBootstrapButtons = Swal.mixin({
		confirmButtonClass: 'btn btn-success',
		cancelButtonClass: 'btn btn-danger',
		buttonsStyling: false,
		reverseButtons: true
	})

	swalWithBootstrapButtons.fire({
		title: 'Êtes vous sur ?',
		html: 'Attention ! Vous aller supprimer un produit à commander.',
		type: 'warning',
		showCancelButton: true,
		confirmButtonText: 'Oui, supprimer',
		cancelButtonText: 'Non, c\'est une erreur',
	}).then((result) => {
		if (result.value) {
			location.href = url;
		}
	});
});



</script>
{% endblock %}

